<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>picket 회원가입</title>
  
  <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body {
      background-color: #121212;
      font-family: 'Noto Sans KR', sans-serif;
      color: #e0e0e0;
    }

    .main-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding-top: 5rem;
        padding-bottom: 5rem;
    }
    
    h2.display-5 {
        font-family: 'Noto Sans KR', sans-serif;
        font-size: 4.2rem;
        color: #ffffff;
        letter-spacing: -1px;
        font-weight: 700;
    }
    
    p, label, .form-check-label, .link-secondary, .input-group-text, .form-select {
        color: #a0a0a0 !important;
    }
    
    p a, .form-check a {
        color: #00f2ea !important;
        text-decoration: none !important;
        font-weight: bold;
    }

    p a:hover, .form-check a:hover {
        text-decoration: underline !important;
    }

    .input-group-text {
        background-color: #212121 !important;
        border: 1px solid #424242 !important;
        border-right: none !important;
    }

    .form-control, .form-select {
        background-color: #212121 !important;
        color: #ffffff !important;
        border: 1px solid #424242 !important;
    }
    .form-control:focus, .form-select:focus {
        border-color: #00f2ea !important;
        box-shadow: 0 0 10px rgba(0, 242, 234, 0.3);
        z-index: 3;
    }
    .form-control::placeholder {
        color: #a0a0a0 !important;
    }

    .custom-file-label {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        cursor: pointer;
        color: #a0a0a0 !important;
    }
    .custom-file-label.selected {
        color: #ffffff !important;
    }

    .btn-primary-custom {
        background-color: #00f2ea !important;
        color: #121212 !important;
        font-weight: bold;
        border: none !important;
    }

    .intro-section h3 {
        color: #e0e0e0;
        font-family: 'Anton', sans-serif;
        letter-spacing: 2px;
    }
    .intro-section p {
        font-size: 0.95rem;
        line-height: 1.6;
    }
    
    .invalid-feedback {
      color: #ff6b6b !important; /* 에러 메시지 색상 */
      font-size: 0.875em;
      margin-top: -0.5rem; /* 위쪽 여백 조정 */
      margin-bottom: 0.5rem;
      text-align: left;
      width: 100%;
    }
  </style>
</head>

<body>

  <section class="main-container">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-md-11 col-lg-8 col-xl-7 col-xxl-6">
          <div class="mb-5 text-center">
            <h2 class="display-5 text-center">picket 회원가입</h2>
            <p class="m-0">이미 계정이 있으신가요? <a href="#!">로그인</a></p>
          </div>

          <div class="card border-0 shadow-sm" style="background-color: #1a1a1a;">
            <div class="card-body p-4 p-md-5">
              <h4 class="text-center mb-4" style="color: #e0e0e0;">회원가입</h4>
                <form id="signupForm" novalidate>
                    
                    <div class="input-group mb-1">
                        <span class="input-group-text"><i class="fa fa-user"></i></span>
                        <input type="text" id="userName" name="userName" class="form-control" placeholder="이름" required>
                    </div>
                    <div id="userName-error" class="invalid-feedback d-block"></div>

                    <div class="input-group mb-1">
                        <span class="input-group-text"><i class="fa fa-envelope"></i></span>
                        <input type="email" id="email" name="email" class="form-control" placeholder="이메일 주소" required>
                    </div>
                    <div id="email-error" class="invalid-feedback d-block"></div>

                    <div class="input-group mb-1">
                        <span class="input-group-text"><i class="fa fa-phone"></i></span>
                        <select id="phonePrefix" name="phonePrefix" class="form-select" style="max-width: 90px;">
                            <option selected>010</option>
                            <option>011</option>
                            <option>016</option>
                            <option>017</option>
                        </select>
                        <input type="text" id="phoneNumber" name="phoneNumber" class="form-control" placeholder="핸드폰 번호 ('-' 제외)" required pattern="[0-9]{7,8}">
                    </div>
                    <div id="phoneNumber-error" class="invalid-feedback d-block"></div>

                    <div class="input-group mb-3">
                        <span class="input-group-text"><i class="fa fa-building"></i></span>
                        <select id="userTypeSelect" name="userType" class="form-select">
                            <option selected value="default">회원가입 유형</option>
                            <option value="general">일반 사용자</option>
                            <option value="seller">티켓 판매자</option>
                        </select>
                    </div>

                    <div id="seller-fields" style="display: none;">
                        <hr style="border-top: 1px solid #424242; margin: 1.5rem 0;">
                        <h5 class="text-center mb-3" style="color: #00f2ea;">사업자 정보 입력</h5>
                        
                        <div class="input-group mb-1">
                            <span class="input-group-text"><i class="fa fa-store"></i></span>
                            <input type="text" id="companyName" class="form-control" placeholder="상호명 (회사 이름)" name="companyName">
                        </div>
                        <div id="companyName-error" class="invalid-feedback d-block"></div>

                        <div class="input-group mb-1">
                            <span class="input-group-text"><i class="fa fa-hashtag"></i></span>
                            <input type="text" id="businessNumber" class="form-control" placeholder="사업자 등록번호 10자리 ('-' 제외)" name="businessNumber" pattern="[0-9]{10}">
                        </div>
                        <div id="businessNumber-error" class="invalid-feedback d-block"></div>

                        <div class="input-group mb-1">
                            <span class="input-group-text"><i class="fa fa-user-tie"></i></span>
                            <input type="text" id="ceoName" class="form-control" placeholder="대표자명" name="ceoName">
                        </div>
                        <div id="ceoName-error" class="invalid-feedback d-block"></div>

                        <div class="input-group mb-1">
                            <span class="input-group-text"><i class="fa fa-map-marker-alt"></i></span>
                            <input type="text" id="businessAddress" class="form-control" placeholder="사업장 주소" name="businessAddress">
                        </div>
                        <div id="businessAddress-error" class="invalid-feedback d-block"></div>
                        
                        <div class="input-group mb-1">
                            <span class="input-group-text"><i class="fa fa-file-upload"></i></span>
                             <input type="file" id="businessLicenseInput" name="businessLicense" accept=".jpg, .png, .pdf" style="display: none;">
                             <label for="businessLicenseInput" id="businessLicenseLabel" class="form-control custom-file-label">사업자 등록증 사진</label>
                        </div>
                        <div id="businessLicense-error" class="invalid-feedback d-block"></div>
                        <hr style="border-top: 1px solid #424242; margin: 1.5rem 0;">
                    </div>
                    
                    <div class="input-group mb-1">
                        <span class="input-group-text"><i class="fa fa-lock"></i></span>
                        <input type="password" id="password" name="password" class="form-control" placeholder="비밀번호 생성 (영문, 숫자 포함 8자 이상)" required minlength="8">
                    </div>
                    <div id="password-error" class="invalid-feedback d-block"></div>

                    <div class="input-group mb-1">
                        <span class="input-group-text"><i class="fa fa-lock"></i></span>
                        <input type="password" id="confirm_password" name="confirm_password" class="form-control" placeholder="비밀번호 재입력" required>
                    </div>
                    <div id="confirm_password-error" class="invalid-feedback d-block"></div>

                    <div class="form-check my-4">
                      <input class="form-check-input" type="checkbox" id="agreeTerms" name="agreeTerms">
                      <label class="form-check-label" for="agreeTerms">
                        (필수) <a href="#!">이용약관</a> 및 <a href="#!">개인정보 처리방침</a>에 동의합니다.
                      </label>
                    </div>
                    <div id="agreeTerms-error" class="invalid-feedback d-block"></div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary-custom btn-lg">회원가입</button>
                    </div>
                </form>
            </div>
          </div>
          
          <div class="intro-section text-center mt-5">
              <h3 class="mb-3">About picket</h3>
              <p class="px-md-5">
                picket은 가장 빠른 티켓예매 사이트로 일반 콘서트를 넘어서 뮤지컬, 스포츠 티켓, 전시회 등 분야를 가리지 않고 모든 문화예술 및 이벤트 티켓을 빠르고 편리하게 예매할 수 있도록 돕습니다.
              </p>
          </div>

        </div>
      </div>
    </div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
  $(document).ready(function() {
      $('#userTypeSelect').on('change', function() {
          if (this.value === 'seller') {
              $('#seller-fields').slideDown();
          } else {
              $('#seller-fields').slideUp();
          }
      });
      
      $('#businessLicenseInput').on('change', function() {
          const fileName = this.files[0] ? this.files[0].name : "사업자 등록증 사진";
          const label = $('#businessLicenseLabel');
          label.text(fileName);
          if (this.files[0]) {
              label.addClass('selected');
              displayError('businessLicense', '');
          } else {
              label.removeClass('selected');
          }
      });
      
      function displayError(field, message) {
          $('#' + field + '-error').text(message);
      }

      function clearErrors() {
          $('.invalid-feedback').text('');
      }

      $('#signupForm').submit(function(event) {
          event.preventDefault();
          clearErrors();

          let isValid = true;

          if ($('#userName').val().trim() === '') {
              displayError('userName', '이름을 입력해주세요.');
              isValid = false;
          }

          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test($('#email').val())) {
              displayError('email', '올바른 이메일 주소를 입력해주세요.');
              isValid = false;
          }
          
          const phoneRegex = /^[0-9]{7,8}$/;
          if(!phoneRegex.test($('#phoneNumber').val())) {
              displayError('phoneNumber', "'-'를 제외한 7~8자리의 숫자를 입력해주세요.");
              isValid = false;
          }

          const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
          const password = $('#password').val();
          if (!passwordRegex.test(password)) {
              displayError('password', '비밀번호는 8자 이상이며, 영문과 숫자를 포함해야 합니다.');
              isValid = false;
          }

          if (password !== $('#confirm_password').val()) {
              displayError('confirm_password', '비밀번호가 일치하지 않습니다.');
              isValid = false;
          }

          if ($('#userTypeSelect').val() === 'seller') {
              if ($('#companyName').val().trim() === '') {
                  displayError('companyName', '상호명을 입력해주세요.');
                  isValid = false;
              }
              const businessNumRegex = /^[0-9]{10}$/;
              if (!$('#businessNumber').val().match(businessNumRegex)) {
                  displayError('businessNumber', "'-'를 제외한 10자리 사업자 등록번호를 입력해주세요.");
                  isValid = false;
              }
              if ($('#ceoName').val().trim() === '') {
                  displayError('ceoName', '대표자명을 입력해주세요.');
                  isValid = false;
              }
              if ($('#businessAddress').val().trim() === '') {
                  displayError('businessAddress', '사업장 주소를 입력해주세요.');
                  isValid = false;
              }
              if ($('#businessLicenseInput').get(0).files.length === 0) {
                  displayError('businessLicense', '사업자 등록증 사진을 첨부해주세요.');
                  isValid = false;
              }
          }
          
          if (!$('#agreeTerms').is(':checked')) {
              displayError('agreeTerms', '이용약관 및 개인정보 처리방침에 동의해주세요.');
              isValid = false;
          }
          
          if (isValid) {
              alert("회원가입 요청이 완료되었습니다!");
          }
      });
  });
  </script>

</body>
</html>