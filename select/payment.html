<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제하기 - 코딩 파트너</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body {
            background-color: #f4f6f8;
        }

        .container {
            max-width: 960px;
        }

        .card {
            border: none;
            border-radius: 0.75rem;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.07);
        }

        .payment-method-item {
            cursor: pointer;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
        }

        .payment-method-item.active {
            background-color: #e7f1ff;
            border-color: #a0c7ff !important;
            color: #004aab;
            font-weight: 600;
        }

        .payment-icon-wrapper {
            width: 30px;
            text-align: center;
            margin-right: 1rem;
        }

        .payment-icon-wrapper .bi,
        .payment-icon-wrapper svg,
        .payment-icon-wrapper .payment-logo {
            width: 26px;
            height: 26px;
            vertical-align: middle;
        }

        .payment-logo {
            object-fit: contain;
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <div class="text-center mb-5">
            <h1 class="fw-bold">결제하기</h1>
            <p class="text-muted">최종 주문내역을 확인하고 결제수단을 선택해주세요.</p>
        </div>
        <div class="row g-4">
            <div class="col-lg-5 order-lg-last">
                <div class="card">
                    <div class="card-header bg-white py-3">
                        <h4 class="mb-0 fw-bold">주문내역</h4>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush" id="orderSummaryList"></ul>
                        <div class="mt-3">
                            <h6 class="fw-bold">선택 좌석</h6>
                            <p class="text-muted" id="selectedSeatsDisplay"></p>
                        </div>
                        <ul class="list-group list-group-flush mt-3">
                            <li class="list-group-item d-flex justify-content-between align-items-center bg-light"><span
                                    class="fw-bold">상품 금액</span><strong id="subtotalAmount">0원</strong></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center"><span
                                    class="fw-bold">할인 금액</span><strong class="text-danger"></strong></li>
                        </ul>
                    </div>
                    <div class="card-footer bg-white py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0 fw-bolder">총 결제금액</h5>
                            <h4 class="mb-0 fw-bolder text-primary" id="totalAmount">0원</h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="card">
                    <div class="card-header bg-white py-3">
                        <h4 class="mb-0 fw-bold">결제수단</h4>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush payment-methods">
                            <div class="list-group-item list-group-item-action payment-method-item active"
                                data-method="card">
                                <div class="payment-icon-wrapper"><i class="bi bi-credit-card-fill text-primary"></i>
                                </div><span>카드</span>
                            </div>
                            <div class="list-group-item list-group-item-action payment-method-item"
                                data-method="transfer">
                                <div class="payment-icon-wrapper"><i class="bi bi-bank2 text-success"></i></div>
                                <span>무통장입금</span>
                            </div>
                            <div class="list-group-item list-group-item-action payment-method-item" data-method="naver">
                                <div class="payment-icon-wrapper"><img src="naver.jpg" alt="네이버페이 로고"
                                        class="payment-logo"></div><span>네이버페이</span>
                            </div>
                            <div class="list-group-item list-group-item-action payment-method-item" data-method="toss">
                                <div class="payment-icon-wrapper"><img src="Toss-logo.png" alt="토스 로고"
                                        class="payment-logo"></div><span>토스페이</span>
                            </div>
                        </div>
                        <div class="mt-4">
                            <p class="text-muted small">선택한 결제수단으로 결제를 계속 진행합니다.</p>
                        </div>
                    </div>
                    <div class="card-footer bg-white p-3"><button class="btn btn-primary w-100 py-3 fw-bold"
                            id="paymentButton">0원 결제하기</button></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const paymentMethods = document.querySelectorAll('.payment-method-item');
        paymentMethods.forEach(item => { item.addEventListener('click', () => { document.querySelector('.payment-method-item.active')?.classList.remove('active'); item.classList.add('active'); }); });
        document.addEventListener('DOMContentLoaded', () => {
            const orderDataJSON = sessionStorage.getItem('orderData');
            const seatDataJSON = sessionStorage.getItem('seatSelectionData');
            if (!orderDataJSON || !seatDataJSON) {
                alert('주문 또는 좌석 정보가 없습니다. 첫 페이지로 돌아갑니다.');
                window.location.href = 'index.html';
                return;
            }
            const orderData = JSON.parse(orderDataJSON);
            const seatData = JSON.parse(seatDataJSON);
            const orderListElement = document.querySelector('#orderSummaryList');
            const selectedSeatsDisplay = document.querySelector('#selectedSeatsDisplay');
            const subtotalElement = document.querySelector('#subtotalAmount');
            const totalAmountElement = document.querySelector('#totalAmount');
            const paymentButton = document.querySelector('#paymentButton');
            orderListElement.innerHTML = '';
            orderData.items.forEach(item => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';
                li.innerHTML = `<div><h6 class="my-0">${item.name}</h6><small class="text-muted">수량: ${item.quantity}개</small></div><span class="text-muted">${(item.price * item.quantity).toLocaleString()}원</span>`;
                orderListElement.appendChild(li);
            });
            selectedSeatsDisplay.textContent = seatData.selectedSeats.join(', ');
            const discount = 0
            const finalPrice = orderData.totalPrice - discount;
            subtotalElement.textContent = `${orderData.totalPrice.toLocaleString()}원`;
            totalAmountElement.textContent = `${finalPrice.toLocaleString()}원`;
            paymentButton.textContent = `${finalPrice.toLocaleString()}원 결제하기`;
        });
    </script>
</body>

</html>